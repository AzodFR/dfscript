(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{372:function(e,t,r){"use strict";r.r(t);var n,o,c,l,f=r(32),m=(r(67),r(1),r(39),r(22),r(130),r(9),r(24),r(129),r(241).JsonRpc),time=15e3,h={name:"Interval",data:function(){return{rpc:null}},mounted:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.rpc=new m(e.$store.state.user.wax.rpc.endpoint,{fetch:fetch}),localStorage.getItem("blockedRPC")&&"false"!=localStorage.getItem("blockedRPC")||(e.checkRPC(),e.launchCheck()),e.fetchStake(),e.launchIntervalMines(),e.launchIntervalTokens(),e.launchIntervalItems();case 6:case"end":return t.stop()}}),t)})))()},methods:{launchCheck:(l=Object(f.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setInterval(Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.checkRPC();case 1:case"end":return e.stop()}}),e)}))),6e5);case 1:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)}),checkRPC:(c=Object(f.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,setTimeout((function(){t?(t=!1,console.log("rpc checked")):(console.log("fuck rpc"),localStorage.getItem("blockedRPC")&&"false"!=localStorage.getItem("blockedRPC")||localStorage.setItem("rpc","random"),(localStorage.getItem("blockedRPC")||"true"==localStorage.getItem("blockedRPC"))&&(t=!0),localStorage.getItem("autoLogin")&&"false"!=localStorage.getItem("autoLogin")||localStorage.setItem("autoLogin","rpc"),window.location.href="/")}),2e4),e.prev=2,r=new m(this.$store.state.user.wax.rpc.endpoint,{fetch:fetch}),e.next=6,r.get_info().catch((function(e){t=!1,console.log("fuck rpc"),localStorage.getItem("blockedRPC")&&"false"!=localStorage.getItem("blockedRPC")||localStorage.setItem("rpc","random"),localStorage.getItem("autoLogin")&&"false"!=localStorage.getItem("autoLogin")||localStorage.setItem("autoLogin","rpc"),window.location.href="/"})).then((function(){t=!0}));case 6:e.next=15;break;case 8:e.prev=8,e.t0=e.catch(2),t=!1,console.log("fuck rpc"),localStorage.getItem("blockedRPC")&&"false"!=localStorage.getItem("blockedRPC")||localStorage.setItem("rpc","random"),localStorage.getItem("autoLogin")&&"false"!=localStorage.getItem("autoLogin")||localStorage.setItem("autoLogin","rpc"),window.location.href="/";case 15:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return c.apply(this,arguments)}),launchFetchStake:function(){var e=this;this.fetchStake(),setInterval((function(){e.fetchStake()}),time)},fetchTemplate:(o=Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)}),fetchRss:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.rpc.get_table_rows({json:!0,code:"desertfarmgm",scope:e.$store.state.user.name,table:"balances"}).then(function(){var t=Object(f.a)(regeneratorRuntime.mark((function t(r){var n,o,i,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=r.rows,console.log(n),o=["DFE","DFW"],["DFE","DFW"],i=0;i<n.length;i++)o.splice(o.indexOf(n[i].balance.split(" ")[1]),1),e.$store.commit("user/setRessource",{type:n[i].balance.split(" ")[1],value:n[i].balance.split(" ")[0]});for(c=0;c<o.length;c++)null==e.$store.state.user.ressources[o[c]]&&e.$store.commit("user/setRessource",{type:o[c],value:"0.0000"});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.rpc.get_currency_balance("deserttokens",e.$store.state.user.name,"DFE").then(function(){var t=Object(f.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.commit("user/setToken",{type:"DFE",value:r[0]?parseFloat(r[0].split(" ")[0]):0});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.rpc.get_currency_balance("deserttokens",e.$store.state.user.name,"DFW").then(function(){var t=Object(f.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.commit("user/setToken",{type:"DFW",value:r[0]?parseFloat(r[0].split(" ")[0]):0});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.rpc.get_currency_balance("eosio.token",e.$store.state.user.name,"WAX").then(function(){var t=Object(f.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.commit("user/setToken",{type:"WAX",value:parseFloat(r[0].split(" ")[0])});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})))()},fetchStake:(n=Object(f.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.rpc.get_account(this.$store.state.user.name).then(function(){var e=Object(f.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(r),t.$store.commit("user/setStake",parseFloat(r.total_resources.cpu_weight.split(" ")[0]).toFixed(2)),t.$store.commit("user/setCPU",(100*r.cpu_limit.used/r.cpu_limit.max).toFixed(0));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),launchIntervalItems:function(){var e=this;this.fetchItems(),setInterval((function(){e.fetchItems()}),time)},fetchItems:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.rpc.get_table_rows({json:!0,code:"desertfarmgm",scope:e.$store.state.user.name,table:"items"}).then(function(){var t=Object(f.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("items",r),!(r.rows.length<=0)){t.next=5;break}return t.abrupt("return");case 5:e.$store.commit("user/setItem",{value:r.rows,type:"items"});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},launchIntervalTokens:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.fetchRss(),setInterval((function(){e.fetchRss()}),time);case 2:case"end":return t.stop()}}),t)})))()},launchIntervalMines:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.fetchMines(),setInterval((function(){e.fetchMines()}),time);case 2:case"end":return t.stop()}}),t)})))()},fetchMines:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.rpc.get_table_rows({json:!0,code:"desertfarmgm",scope:"desertfarmgm",table:"mines",lower_bound:e.$store.state.user.name,upper_bound:e.$store.state.user.name}).then(function(){var t=Object(f.a)(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(r),!(r.rows.length<=0)){t.next=5;break}return t.abrupt("return");case 5:n=r.rows[0],o=new Date(n.end),n.end=o.getTime(),console.log("mine",n),e.$store.commit("user/setMine",n);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},w=h,d=r(66),component=Object(d.a)(w,(function(){return(0,this._self._c)("div")}),[],!1,null,null,null);t.default=component.exports}}]);